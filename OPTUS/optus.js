function changeprogress(a,b){var c=document.getElementById("selectprogess"),d=c.options[c.selectedIndex].value,e=document.getElementById("percent-"+d).innerHTML;e=e.slice(0,-1),a=parseInt(a,0)+parseInt(e,0),a>=b?(document.getElementById(d).style="background-color: red;width:"+a+"%; visibility: visible;transition: width 0.5s",document.getElementById("percent-"+d).innerHTML=a+"%"):a>0?(document.getElementById(d).style="width:"+a+"%; visibility: visible;transition: width 0.5s",document.getElementById("percent-"+d).innerHTML=a+"%"):(document.getElementById(d).style="width:0%;visibility: hidden;",document.getElementById("percent-"+d).innerHTML="0%")}function processresponse(a){livedata="object"==typeof a?a:JSON.parse(a);for(var b="",c=0;c<livedata.buttons.length;c++)b=b+"<button class='btncontrols' onclick='changeprogress("+livedata.buttons[c]+","+livedata.limit+")' value='"+livedata.buttons[c]+"'>"+livedata.buttons[c]+"</button>";document.getElementById("btnctrls").innerHTML=b;for(var d="<select id='selectprogess'>",e="",f=0;f<livedata.bars.length;f++){var g=f+1;d=d+"<option value='progress"+g+"'>#progress"+g+"</option>",e=e+"<div class='prog-border'><div id='progress"+g+"' class='prog-container prog-gray' style='width:"+livedata.bars[f]+"%'></div><div class='percent' title='"+livedata.limit+"' id='percent-progress"+g+"'>"+livedata.bars[f]+"%</div></div>"}d+="</select>",document.getElementById("barctrls").innerHTML=d,document.getElementById("prog").innerHTML=e}function loadJSON(a,b,c){var d=new XMLHttpRequest;d.onreadystatechange=function(){d.readyState===XMLHttpRequest.DONE&&(200===d.status?b&&b(JSON.parse(d.responseText)):c&&c(d))},d.open("GET",a,!0),d.send()}var livedata="";loadJSON("http://pb-api.herokuapp.com/bars",function(a){console.log(a),processresponse(a)},function(a){console.log(a.response),processresponse(a.response)});